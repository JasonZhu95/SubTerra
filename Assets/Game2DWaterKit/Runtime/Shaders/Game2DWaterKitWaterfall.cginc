#ifndef Game2D_WaterKit_Waterfall_INCLUDED
#define Game2D_WaterKit_Waterfall_INCLUDED

#define Is_Waterfall2D_ApplyTintColorBeforeTexture_Enabled defined(Waterfall2D_ApplyTintColorBeforeTexture)
#define Is_Waterfall2D_BodyColorGradient_Enabled defined(Waterfall2D_BodyColorGradient)
#define Is_Waterfall2D_BodyTexture_Enabled defined(Waterfall2D_BodyTexture)
#define Is_Waterfall2D_BodyTextureSheet_Enabled defined(Waterfall2D_BodyTextureSheet)
#define Is_Waterfall2D_BodyTextureSheetWithLerp_Enabled defined(Waterfall2D_BodyTextureSheetWithLerp)
#define Is_Waterfall2D_BodyTextureStretch_Enabled defined(Waterfall2D_BodyTextureStretch)
#define Is_Waterfall2D_BodyTextureStretchAutoX_Enabled defined(Waterfall2D_BodyTextureStretchAutoX)
#define Is_Waterfall2D_BodyTextureStretchAutoY_Enabled defined(Waterfall2D_BodyTextureStretchAutoY)
#define Is_Waterfall2D_BodySecondTexture_Enabled defined(Waterfall2D_BodySecondTexture)
#define Is_Waterfall2D_BodySecondTextureSheet_Enabled defined(Waterfall2D_BodySecondTextureSheet)
#define Is_Waterfall2D_BodySecondTextureSheetWithLerp_Enabled defined(Waterfall2D_BodySecondTextureSheetWithLerp)
#define Is_Waterfall2D_BodySecondTextureStretch_Enabled defined(Waterfall2D_BodySecondTextureStretch)
#define Is_Waterfall2D_BodySecondTextureStretchAutoX_Enabled defined(Waterfall2D_BodySecondTextureStretchAutoX)
#define Is_Waterfall2D_BodySecondTextureStretchAutoY_Enabled defined(Waterfall2D_BodySecondTextureStretchAutoY)
#define Is_Waterfall2D_BodyTextureNoise_Enabled defined(Waterfall2D_BodyTextureNoise)
#define Is_Waterfall2D_BodyTextureAlphaCutoff_Enabled defined(Waterfall2D_BodyTextureAlphaCutoff)
#define Is_Waterfall2D_TopEdge_Enabled defined(Waterfall2D_TopEdge)
#define Is_Waterfall2D_TopEdgeTextureSheet_Enabled defined(Waterfall2D_TopEdgeTextureSheet)
#define Is_Waterfall2D_TopEdgeTextureSheetWithLerp_Enabled defined(Waterfall2D_TopEdgeTextureSheetWithLerp)
#define Is_Waterfall2D_TopEdgeTextureStretch_Enabled defined(Waterfall2D_TopEdgeTextureStretch)
#define Is_Waterfall2D_TopEdgeTextureStretchAutoX_Enabled defined(Waterfall2D_TopEdgeTextureStretchAutoX)
#define Is_Waterfall2D_TopEdgeTextureStretchAutoY_Enabled defined(Waterfall2D_TopEdgeTextureStretchAutoY)
#define Is_Waterfall2D_BottomEdge_Enabled defined(Waterfall2D_BottomEdge)
#define Is_Waterfall2D_BottomEdgeTextureSheet_Enabled defined(Waterfall2D_BottomEdgeTextureSheet)
#define Is_Waterfall2D_BottomEdgeTextureSheetWithLerp_Enabled defined(Waterfall2D_BottomEdgeTextureSheetWithLerp)
#define Is_Waterfall2D_BottomEdgeTextureStretch_Enabled defined(Waterfall2D_BottomEdgeTextureStretch)
#define Is_Waterfall2D_BottomEdgeTextureStretchAutoX_Enabled defined(Waterfall2D_BottomEdgeTextureStretchAutoX)
#define Is_Waterfall2D_BottomEdgeTextureStretchAutoY_Enabled defined(Waterfall2D_BottomEdgeTextureStretchAutoY)
#define Is_Waterfall2D_TopBottomEdgesSameTexture_Enabled defined(Waterfall2D_TopBottomEdgesSameTexture)
#define Is_Waterfall2D_TopBottomEdgesSameTextureSheet_Enabled defined(Waterfall2D_TopBottomEdgesSameTextureSheet)
#define Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled defined(Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp)
#define Is_Waterfall2D_TopBottomEdgesFlipTopEdgeY_Enabled defined(Waterfall2D_TopBottomEdgesFlipTopEdgeY)
#define Is_Waterfall2D_TopBottomEdgesFlipBottomEdgeY_Enabled defined(Waterfall2D_TopBottomEdgesFlipBottomEdgeY)
#define Is_Waterfall2D_TopBottomEdgesTextureStretch_Enabled defined(Waterfall2D_TopBottomEdgesTextureStretch)
#define Is_Waterfall2D_TopBottomEdgesTextureStretchAutoX_Enabled defined(Waterfall2D_TopBottomEdgesTextureStretchAutoX)
#define Is_Waterfall2D_TopBottomEdgesTextureStretchAutoY_Enabled defined(Waterfall2D_TopBottomEdgesTextureStretchAutoY)
#define Is_Waterfall2D_TopBottomEdgesNoise_Enabled defined(Waterfall2D_TopBottomEdgesNoise)
#define Is_Waterfall2D_LeftEdge_Enabled defined(Waterfall2D_LeftEdge)
#define Is_Waterfall2D_LeftEdgeTextureSheet_Enabled defined(Waterfall2D_LeftEdgeTextureSheet)
#define Is_Waterfall2D_LeftEdgeTextureSheetWithLerp_Enabled defined(Waterfall2D_LeftEdgeTextureSheetWithLerp)
#define Is_Waterfall2D_LeftEdgeTextureStretch_Enabled defined(Waterfall2D_LeftEdgeTextureStretch)
#define Is_Waterfall2D_LeftEdgeTextureStretchAutoX_Enabled defined(Waterfall2D_LeftEdgeTextureStretchAutoX)
#define Is_Waterfall2D_LeftEdgeTextureStretchAutoY_Enabled defined(Waterfall2D_LeftEdgeTextureStretchAutoY)
#define Is_Waterfall2D_RightEdge_Enabled defined(Waterfall2D_RightEdge)
#define Is_Waterfall2D_RightEdgeTextureSheet_Enabled defined(Waterfall2D_RightEdgeTextureSheet)
#define Is_Waterfall2D_RightEdgeTextureSheetWithLerp_Enabled defined(Waterfall2D_RightEdgeTextureSheetWithLerp)
#define Is_Waterfall2D_RightEdgeTextureStretch_Enabled defined(Waterfall2D_RightEdgeTextureStretch)
#define Is_Waterfall2D_RightEdgeTextureStretchAutoX_Enabled defined(Waterfall2D_RightEdgeTextureStretchAutoX)
#define Is_Waterfall2D_RightEdgeTextureStretchAutoY_Enabled defined(Waterfall2D_RightEdgeTextureStretchAutoY)
#define Is_Waterfall2D_LeftRightEdgesSameTexture_Enabled defined(Waterfall2D_LeftRightEdgesSameTexture)
#define Is_Waterfall2D_LeftRightEdgesSameTextureSheet_Enabled defined(Waterfall2D_LeftRightEdgesSameTextureSheet)
#define Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled defined(Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp)
#define Is_Waterfall2D_LeftRightEdgesFlipLeftEdgeX_Enabled defined(Waterfall2D_LeftRightEdgesFlipLeftEdgeX)
#define Is_Waterfall2D_LeftRightEdgesFlipRightEdgeX_Enabled defined(Waterfall2D_LeftRightEdgesFlipRightEdgeX)
#define Is_Waterfall2D_LeftRightEdgesTextureStretch_Enabled defined(Waterfall2D_LeftRightEdgesTextureStretch)
#define Is_Waterfall2D_LeftRightEdgesTextureStretchAutoX_Enabled defined(Waterfall2D_LeftRightEdgesTextureStretchAutoX)
#define Is_Waterfall2D_LeftRightEdgesTextureStretchAutoY_Enabled defined(Waterfall2D_LeftRightEdgesTextureStretchAutoY)
#define Is_Waterfall2D_LeftRightEdgesTextureAlphaCutoff_Enabled defined(Waterfall2D_LeftRightEdgesTextureAlphaCutoff)
#define Is_Waterfall2D_LeftRightEdgesNoise_Enabled defined(Waterfall2D_LeftRightEdgesNoise)
#define Is_Waterfall2D_Refraction_Enabled defined(Waterfall2D_Refraction)
#define Is_Waterfall2D_ApplyEmissionColor_Enabled defined(Waterfall2D_ApplyEmissionColor)
#define Is_Waterfall2D_LeftRightEdgesAbsoluteThicknessAndOffset_Enabled defined(Waterfall2D_LeftRightEdgesAbsoluteThicknessAndOffset)
#define Is_Waterfall2D_TopBottomEdgesAbsoluteThicknessAndOffset_Enabled defined(Waterfall2D_TopBottomEdgesAbsoluteThicknessAndOffset)

#define Waterfall2D_HasBodyTexture Is_Waterfall2D_BodyTexture_Enabled || Is_Waterfall2D_BodyTextureSheet_Enabled || Is_Waterfall2D_BodyTextureSheetWithLerp_Enabled
#define Waterfall2D_HasBodySecondTexture Is_Waterfall2D_BodySecondTexture_Enabled || Is_Waterfall2D_BodySecondTextureSheet_Enabled || Is_Waterfall2D_BodySecondTextureSheetWithLerp_Enabled
#define Waterfall2D_HasTopEdge Is_Waterfall2D_TopEdge_Enabled || Is_Waterfall2D_TopEdgeTextureSheet_Enabled || Is_Waterfall2D_TopEdgeTextureSheetWithLerp_Enabled || Is_Waterfall2D_TopBottomEdgesSameTexture_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheet_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled
#define Waterfall2D_HasBottomEdge Is_Waterfall2D_BottomEdge_Enabled || Is_Waterfall2D_BottomEdgeTextureSheet_Enabled || Is_Waterfall2D_BottomEdgeTextureSheetWithLerp_Enabled || Is_Waterfall2D_TopBottomEdgesSameTexture_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheet_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled
#define Waterfall2D_HasLeftEdge Is_Waterfall2D_LeftEdge_Enabled || Is_Waterfall2D_LeftEdgeTextureSheet_Enabled || Is_Waterfall2D_LeftEdgeTextureSheetWithLerp_Enabled || Is_Waterfall2D_LeftRightEdgesSameTexture_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheet_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled
#define Waterfall2D_HasRightEdge Is_Waterfall2D_RightEdge_Enabled || Is_Waterfall2D_RightEdgeTextureSheet_Enabled || Is_Waterfall2D_RightEdgeTextureSheetWithLerp_Enabled || Is_Waterfall2D_LeftRightEdgesSameTexture_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheet_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled

#define Waterfall2D_ApplyBodyAlphaCutoff (Waterfall2D_HasBodyTexture || Waterfall2D_HasBodySecondTexture) && Is_Waterfall2D_BodyTextureAlphaCutoff_Enabled
#define Waterfall2D_ApplyLeftRightEdgesAlphaCutoff (Waterfall2D_HasLeftEdge || Waterfall2D_HasRightEdge) && Is_Waterfall2D_LeftRightEdgesTextureAlphaCutoff_Enabled
#define Waterfall2D_LeftRightEdgesUseAbsoluteThicknessAndOffset (Waterfall2D_HasLeftEdge || Waterfall2D_HasRightEdge) && Is_Waterfall2D_LeftRightEdgesAbsoluteThicknessAndOffset_Enabled
#define Waterfall2D_TopBottomEdgesUseAbsoluteThicknessAndOffset (Waterfall2D_HasTopEdge || Waterfall2D_HasBottomEdge) && Is_Waterfall2D_TopBottomEdgesAbsoluteThicknessAndOffset_Enabled


		#if Is_Waterfall2D_Refraction_Enabled
		uniform float4x4 _WaterfallMVP;
		uniform sampler2D _RefractionTexture;
		#endif
		uniform float4 _AspectRatio;
		uniform float4 _Size;

	// Refraction Variables
	#if Is_Waterfall2D_Refraction_Enabled
		half _RefractionNoiseStrength;
		half _RefractionNoiseSpeed;
		half4 _RefractionNoiseTiling;
	#endif

	// Body Color Variables
	#if Is_Waterfall2D_BodyColorGradient_Enabled
		half4 _BodyColorGradientStart;
		half4 _BodyColorGradientEnd;
		half _BodyColorGradientOffset;
	#else
		half4 _BodyColor;
	#endif

	// Body Texture Variables
	#if Is_Waterfall2D_BodyTexture_Enabled || Is_Waterfall2D_BodyTextureSheet_Enabled || Is_Waterfall2D_BodyTextureSheetWithLerp_Enabled
		sampler2D _BodyTexture;
		float4 _BodyTexture_ST;
		half _BodyTextureOpacity;
		half _BodyTextureScrollingSpeed;

		#if Is_Waterfall2D_BodyTextureSheet_Enabled || Is_Waterfall2D_BodyTextureSheetWithLerp_Enabled
			half _BodyTextureSheetInverseRows;
			half _BodyTextureSheetInverseColumns;
			half _BodyTextureSheetFramesPerSecond;
			half _BodyTextureSheetFramesCount;
		#endif
	#endif
		
	// Body Second Texture Variables
	#if Is_Waterfall2D_BodySecondTexture_Enabled || Is_Waterfall2D_BodySecondTextureSheet_Enabled || Is_Waterfall2D_BodySecondTextureSheetWithLerp_Enabled
		sampler2D _BodySecondTexture;
		float4 _BodySecondTexture_ST;
		half _BodySecondTextureOpacity;
		half _BodySecondTextureScrollingSpeed;

		#if Is_Waterfall2D_BodySecondTextureSheet_Enabled || Is_Waterfall2D_BodySecondTextureSheetWithLerp_Enabled
			half _BodySecondTextureSheetInverseRows;
			half _BodySecondTextureSheetInverseColumns;
			half _BodySecondTextureSheetFramesPerSecond;
			half _BodySecondTextureSheetFramesCount;
		#endif
	#endif

	#if Waterfall2D_ApplyBodyAlphaCutoff
		half _BodyTextureAlphaCutoff;
	#endif

	#if Is_Waterfall2D_BodyTextureNoise_Enabled && (Waterfall2D_HasBodyTexture || Waterfall2D_HasBodySecondTexture)
		half _BodyNoiseSpeed;
		half _BodyNoiseStrength;
		half4 _BodyNoiseTiling;
	#endif

	// Top-Bottom Edges Variables
	#if Waterfall2D_HasTopEdge || Waterfall2D_HasBottomEdge
		half4 _TopBottomEdgesThickness;
		half4 _TopBottomEdgesOffset;
	#endif

	#if Is_Waterfall2D_TopBottomEdgesSameTexture_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheet_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled
		sampler2D _TopBottomEdgesTexture;
		float4 _TopBottomEdgesTexture_ST;
		half _TopBottomEdgesTextureOpacity;
		
		#if Is_Waterfall2D_TopBottomEdgesSameTextureSheet_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled
			half _TopBottomEdgesTextureSheetInverseRows;
			half _TopBottomEdgesTextureSheetInverseColumns;
			half _TopBottomEdgesTextureSheetFramesPerSecond;
			half _TopBottomEdgesTextureSheetFramesCount;
		#endif
	#else
		#if Is_Waterfall2D_TopEdge_Enabled || Is_Waterfall2D_TopEdgeTextureSheet_Enabled || Is_Waterfall2D_TopEdgeTextureSheetWithLerp_Enabled
			sampler2D _TopEdgeTexture;
			float4 _TopEdgeTexture_ST;
			half _TopEdgeTextureOpacity;

			#if Is_Waterfall2D_TopEdgeTextureSheet_Enabled || Is_Waterfall2D_TopEdgeTextureSheetWithLerp_Enabled
				half _TopEdgeTextureSheetInverseRows;
				half _TopEdgeTextureSheetInverseColumns;
				half _TopEdgeTextureSheetFramesPerSecond;
				half _TopEdgeTextureSheetFramesCount;
			#endif
		#endif

		#if Is_Waterfall2D_BottomEdge_Enabled || Is_Waterfall2D_BottomEdgeTextureSheet_Enabled || Is_Waterfall2D_BottomEdgeTextureSheetWithLerp_Enabled
			sampler2D _BottomEdgeTexture;
			float4 _BottomEdgeTexture_ST;
			half _BottomEdgeTextureOpacity;

			#if Is_Waterfall2D_BottomEdgeTextureSheet_Enabled || Is_Waterfall2D_BottomEdgeTextureSheetWithLerp_Enabled
				half _BottomEdgeTextureSheetInverseRows;
				half _BottomEdgeTextureSheetInverseColumns;
				half _BottomEdgeTextureSheetFramesPerSecond;
				half _BottomEdgeTextureSheetFramesCount;
			#endif
		#endif
	#endif

	// Top-Bottom Edges Distortion Effect Variables
	#if Is_Waterfall2D_TopBottomEdgesNoise_Enabled
		half _TopBottomEdgesNoiseSpeed;
		half _TopBottomEdgesNoiseStrength;
		half4 _TopBottomEdgesNoiseTiling;
	#endif

	// Left-Right Edges Variables
	#if Waterfall2D_HasLeftEdge || Waterfall2D_HasRightEdge
		half4 _LeftRightEdgesThickness;
		half4 _LeftRightEdgesOffset;
		#if Waterfall2D_ApplyLeftRightEdgesAlphaCutoff
		half _LeftRightEdgesTextureAlphaCutoff;
		#endif
	#endif

	#if Is_Waterfall2D_LeftRightEdgesSameTexture_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheet_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled
		sampler2D _LeftRightEdgesTexture;
		float4 _LeftRightEdgesTexture_ST;
		half _LeftRightEdgesTextureOpacity;
		half _LeftRightEdgesTextureScrollingSpeed;
		
		#if Is_Waterfall2D_LeftRightEdgesSameTextureSheet_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled
			half _LeftRightEdgesTextureSheetInverseRows;
			half _LeftRightEdgesTextureSheetInverseColumns;
			half _LeftRightEdgesTextureSheetFramesPerSecond;
			half _LeftRightEdgesTextureSheetFramesCount;
		#endif
	#else
		#if Is_Waterfall2D_LeftEdge_Enabled || Is_Waterfall2D_LeftEdgeTextureSheet_Enabled || Is_Waterfall2D_LeftEdgeTextureSheetWithLerp_Enabled
			sampler2D _LeftEdgeTexture;
			float4 _LeftEdgeTexture_ST;
			half _LeftEdgeTextureOpacity;
			half _LeftEdgeTextureScrollingSpeed;

			#if Is_Waterfall2D_LeftEdgeTextureSheet_Enabled || Is_Waterfall2D_LeftEdgeTextureSheetWithLerp_Enabled
				half _LeftEdgeTextureSheetInverseRows;
				half _LeftEdgeTextureSheetInverseColumns;
				half _LeftEdgeTextureSheetFramesPerSecond;
				half _LeftEdgeTextureSheetFramesCount;
			#endif
		#endif

		#if Is_Waterfall2D_RightEdge_Enabled || Is_Waterfall2D_RightEdgeTextureSheet_Enabled || Is_Waterfall2D_RightEdgeTextureSheetWithLerp_Enabled
			sampler2D _RightEdgeTexture;
			float4 _RightEdgeTexture_ST;
			half _RightEdgeTextureOpacity;
			half _RightEdgeTextureScrollingSpeed;

			#if Is_Waterfall2D_RightEdgeTextureSheet_Enabled || Is_Waterfall2D_RightEdgeTextureSheetWithLerp_Enabled
				half _RightEdgeTextureSheetInverseRows;
				half _RightEdgeTextureSheetInverseColumns;
				half _RightEdgeTextureSheetFramesPerSecond;
				half _RightEdgeTextureSheetFramesCount;
			#endif
		#endif
	#endif

	// Left-Right Edges Distortion Effect Variables
	#if Is_Waterfall2D_LeftRightEdgesNoise_Enabled
		half _LeftRightEdgesNoiseSpeed;
		half _LeftRightEdgesNoiseStrength;
		half4 _LeftRightEdgesNoiseTiling;
	#endif

	// Emission Variables
	#if Is_Waterfall2D_ApplyEmissionColor_Enabled
		half4 _EmissionColor;
		half _EmissionColorIntensity;
	#endif
		
	// Noise Texture
	#if Is_Waterfall2D_Refraction_Enabled || Is_Waterfall2D_BodyTextureNoise_Enabled || Is_Waterfall2D_TopBottomEdgesNoise_Enabled || Is_Waterfall2D_LeftRightEdgesNoise_Enabled
		sampler2D _NoiseTexture;
		float4 _NoiseTexture_ST;
	#endif
		
	struct Attributes
	{
		float4 pos : POSITION;
		float4 uv : TEXCOORD0;

		#if  defined(LIGHTMAP_ON)
			float2 lightmapCoord : TEXCOORD1;
		#endif
	};

	struct Varyings
	{
		float4 pos : SV_POSITION;
		float4 uv : TEXCOORD0;

		#if Waterfall2D_HasBodyTexture || Waterfall2D_HasBodySecondTexture
			#if Waterfall2D_HasBodySecondTexture
				float4 bodyTextureUV : TEXCOORD1;
			#else
				float2 bodyTextureUV : TEXCOORD1;
			#endif

			#if Is_Waterfall2D_BodyTextureNoise_Enabled
				#if Waterfall2D_HasBodySecondTexture
				float4 bodyNoiseTextureUV : TEXCOORD2;
				#else
				float2 bodyNoiseTextureUV : TEXCOORD2;
				#endif
			#endif
		#endif

		#if Is_Waterfall2D_Refraction_Enabled
			float4 refractionUV : TEXCOORD3;
		#endif

		#if Waterfall2D_HasLeftEdge || Waterfall2D_HasRightEdge
			#if Waterfall2D_HasRightEdge
				float4 leftRightEdgesTextureUV : TEXCOORD4;
			#else
				float2 leftRightEdgesTextureUV : TEXCOORD4;
			#endif
		#endif
		
		#if Waterfall2D_HasTopEdge || Waterfall2D_HasBottomEdge
			#if Waterfall2D_HasBottomEdge
				float4 topBottomEdgesTextureUV : TEXCOORD5;
			#else
				float2 topBottomEdgesTextureUV : TEXCOORD5;
			#endif
		#endif

		#if Is_Waterfall2D_LeftRightEdgesNoise_Enabled
			#if Waterfall2D_HasRightEdge
				float4 leftRightEdgesNoiseTextureUV : TEXCOORD6;
			#else
				float2 leftRightEdgesNoiseTextureUV : TEXCOORD6;
			#endif
		#endif
				
		#if Is_Waterfall2D_TopBottomEdgesNoise_Enabled
			#if Waterfall2D_HasBottomEdge
				float4 topBottomEdgesNoiseTextureUV : TEXCOORD7;
			#else
				float2 topBottomEdgesNoiseTextureUV : TEXCOORD7;
			#endif
		#endif
				
			#if defined(Game2DWaterKit_SRP_Lit)
				float2 lightingUV : TEXCOORD8;
			#else
				#if defined(LIGHTMAP_ON)
					float2 lightmapCoord : TEXCOORD8;
				#else
					#if defined(UNITY_SHOULD_SAMPLE_SH)
			 			half3 sh : TEXCOORD8;
					#endif
				#endif

				#if defined(UNITY_PASS_FORWARDBASE) || defined(UNITY_PASS_FORWARDADD)
  					float3 worldPos : TEXCOORD9;
 				#endif
			#endif

		#if defined(Game2DWaterKit_VertexLit_Vertex) || defined(Game2DWaterKit_VertexLit_VertexLM) || defined(Game2DWaterKit_VertexLit_OnlyDirectional)
			half3 lightColor : COLOR0;
		#endif
	};

	#include "Game2DWaterKit.cginc"
	
	inline Varyings Waterfall2D_Vert (Attributes v)
	{
		Varyings o;
		UNITY_INITIALIZE_OUTPUT(Varyings, o);

		o.pos = ComputeClipPosition(v.pos);

		float2 vertexPositionWorldSpace = (mul(unity_ObjectToWorld, v.pos)).xy;

		// Body Texture UV
		#if Waterfall2D_HasBodyTexture || Waterfall2D_HasBodySecondTexture
			#if Waterfall2D_HasBodyTexture
				#if Is_Waterfall2D_BodyTextureStretch_Enabled
					o.bodyTextureUV.xy = v.uv.xy * _BodyTexture_ST.xy + _BodyTexture_ST.zw;
				#elif Is_Waterfall2D_BodyTextureStretchAutoX_Enabled
					o.bodyTextureUV.xy = v.uv.xy * (_BodyTexture_ST.xy * _AspectRatio.xy) + _BodyTexture_ST.zw;
				#elif Is_Waterfall2D_BodyTextureStretchAutoY_Enabled
					o.bodyTextureUV.xy = v.uv.xy * (_BodyTexture_ST.xy * _AspectRatio.zw) + _BodyTexture_ST.zw;
				#else
					o.bodyTextureUV.xy = TRANSFORM_TEX(vertexPositionWorldSpace, _BodyTexture);
				#endif

				o.bodyTextureUV.y += fmod2(_G2DWK_Frame_Time.x * _BodyTextureScrollingSpeed);
			#endif

			#if Waterfall2D_HasBodySecondTexture
				#if Is_Waterfall2D_BodySecondTextureStretch_Enabled
					o.bodyTextureUV.zw = v.uv.xy * _BodySecondTexture_ST.xy + _BodySecondTexture_ST.zw;
				#elif Is_Waterfall2D_BodySecondTextureStretchAutoX_Enabled
					o.bodyTextureUV.zw = v.uv.xy * (_BodySecondTexture_ST.xy * _AspectRatio.xy) + _BodySecondTexture_ST.zw;
				#elif Is_Waterfall2D_BodySecondTextureStretchAutoY_Enabled
					o.bodyTextureUV.zw = v.uv.xy * (_BodySecondTexture_ST.xy * _AspectRatio.zw) + _BodySecondTexture_ST.zw;
				#else
					o.bodyTextureUV.zw = TRANSFORM_TEX(vertexPositionWorldSpace, _BodySecondTexture);
				#endif

				o.bodyTextureUV.w += fmod2(_G2DWK_Frame_Time.x * _BodySecondTextureScrollingSpeed);
			#endif

			#if Is_Waterfall2D_BodyTextureNoise_Enabled
				#if Waterfall2D_HasBodyTexture
					o.bodyNoiseTextureUV.xy = TRANSFORM_TEX((o.bodyTextureUV.xy * _BodyNoiseTiling.xy), _NoiseTexture) + fmod2(_G2DWK_Frame_Time.w * _BodyNoiseSpeed);
					#if Is_Waterfall2D_BodyTextureStretch_Enabled || Is_Waterfall2D_BodyTextureStretchAutoX_Enabled || Is_Waterfall2D_BodyTextureStretchAutoY_Enabled
						o.bodyNoiseTextureUV.x *= v.uv.z;
					#endif
				#endif
				#if Waterfall2D_HasBodySecondTexture
					o.bodyNoiseTextureUV.zw = TRANSFORM_TEX((o.bodyTextureUV.zw * _BodyNoiseTiling.xy), _NoiseTexture) + fmod2(_G2DWK_Frame_Time.w * _BodyNoiseSpeed);
					#if Is_Waterfall2D_BodySecondTextureStretch_Enabled || Is_Waterfall2D_BodySecondTextureStretchAutoX_Enabled || Is_Waterfall2D_BodySecondTextureStretchAutoY_Enabled
						o.bodyNoiseTextureUV.z *= v.uv.z;
					#endif
				#endif
			#endif
		#endif
		
		#if (Waterfall2D_HasBodyTexture) && (Is_Waterfall2D_BodyTextureStretch_Enabled || Is_Waterfall2D_BodyTextureStretchAutoX_Enabled || Is_Waterfall2D_BodyTextureStretchAutoY_Enabled)
		o.bodyTextureUV.x *= v.uv.z;
		#endif

		#if (Waterfall2D_HasBodySecondTexture) && (Is_Waterfall2D_BodySecondTextureStretch_Enabled || Is_Waterfall2D_BodySecondTextureStretchAutoX_Enabled || Is_Waterfall2D_BodySecondTextureStretchAutoY_Enabled)
		o.bodyTextureUV.z *= v.uv.z;
		#endif

		// Left-Right Edges Texture UV

		#if Waterfall2D_HasLeftEdge || Waterfall2D_HasRightEdge
			half4 leftRightEdgesThickness = _LeftRightEdgesThickness;

			#if Waterfall2D_LeftRightEdgesUseAbsoluteThicknessAndOffset
				leftRightEdgesThickness.xz *= _Size.z;
				leftRightEdgesThickness.yw *= _Size.x;
			#endif
		#endif

		#if Is_Waterfall2D_LeftRightEdgesSameTexture_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheet_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled
			#if Is_Waterfall2D_LeftRightEdgesTextureStretch_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoY_Enabled
				#if Is_Waterfall2D_LeftRightEdgesTextureStretchAutoX_Enabled
					float lrx = _LeftRightEdgesTexture_ST.x * _AspectRatio.x;
					o.leftRightEdgesTextureUV.x = v.uv.x * lrx + _LeftRightEdgesTexture_ST.z;
					o.leftRightEdgesTextureUV.y = (v.uv.y * _LeftRightEdgesTexture_ST.y + _LeftRightEdgesTexture_ST.w) + fmod2(_G2DWK_Frame_Time.x * _LeftRightEdgesTextureScrollingSpeed);
					o.leftRightEdgesTextureUV.z = (v.uv.x - 1.0 + leftRightEdgesThickness.z) * lrx + _LeftRightEdgesTexture_ST.z;
					o.leftRightEdgesTextureUV.w = o.leftRightEdgesTextureUV.y;
				#elif Is_Waterfall2D_LeftRightEdgesTextureStretchAutoY_Enabled
					float lry = v.uv.y * _LeftRightEdgesTexture_ST.y * _AspectRatio.w;
					o.leftRightEdgesTextureUV.x = v.uv.x * (_LeftRightEdgesTexture_ST.x * leftRightEdgesThickness.y) + _LeftRightEdgesTexture_ST.z;
					o.leftRightEdgesTextureUV.y = (lry * leftRightEdgesThickness.y + _LeftRightEdgesTexture_ST.w) + fmod2(_G2DWK_Frame_Time.x * _LeftRightEdgesTextureScrollingSpeed);
					o.leftRightEdgesTextureUV.z = ((v.uv.x - 1.0 + leftRightEdgesThickness.z) * leftRightEdgesThickness.w) * _LeftRightEdgesTexture_ST.x + _LeftRightEdgesTexture_ST.z;
					o.leftRightEdgesTextureUV.w = (lry * leftRightEdgesThickness.w + _LeftRightEdgesTexture_ST.w) + fmod2(_G2DWK_Frame_Time.x * _LeftRightEdgesTextureScrollingSpeed);
				#else
					o.leftRightEdgesTextureUV.x = v.uv.x * (leftRightEdgesThickness.y * _LeftRightEdgesTexture_ST.x) + _LeftRightEdgesTexture_ST.z;
					o.leftRightEdgesTextureUV.y = (v.uv.y * _LeftRightEdgesTexture_ST.y + _LeftRightEdgesTexture_ST.w) + fmod2(_G2DWK_Frame_Time.x * _LeftRightEdgesTextureScrollingSpeed);
					o.leftRightEdgesTextureUV.z = ((v.uv.x - 1.0 + leftRightEdgesThickness.z) * leftRightEdgesThickness.w) * _LeftRightEdgesTexture_ST.x + _LeftRightEdgesTexture_ST.z;
					o.leftRightEdgesTextureUV.w = o.leftRightEdgesTextureUV.y;
				#endif
			#else
				o.leftRightEdgesTextureUV.xy = TRANSFORM_TEX(vertexPositionWorldSpace, _LeftRightEdgesTexture);
				o.leftRightEdgesTextureUV.zw = o.leftRightEdgesTextureUV.xy;
				o.leftRightEdgesTextureUV.yw += fmod2(_G2DWK_Frame_Time.x * _LeftRightEdgesTextureScrollingSpeed);
			#endif

			#if Is_Waterfall2D_LeftRightEdgesFlipLeftEdgeX_Enabled
				o.leftRightEdgesTextureUV.x = 1.0 - o.leftRightEdgesTextureUV.x;
			#elif Is_Waterfall2D_LeftRightEdgesFlipRightEdgeX_Enabled
				o.leftRightEdgesTextureUV.z = 1.0 - o.leftRightEdgesTextureUV.z;
			#endif
		#else
			//Left Texture UV
			#if Is_Waterfall2D_LeftEdge_Enabled || Is_Waterfall2D_LeftEdgeTextureSheet_Enabled || Is_Waterfall2D_LeftEdgeTextureSheetWithLerp_Enabled
				#if Is_Waterfall2D_LeftEdgeTextureStretch_Enabled || Is_Waterfall2D_LeftEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftEdgeTextureStretchAutoY_Enabled
					#if Is_Waterfall2D_LeftEdgeTextureStretchAutoX_Enabled
						o.leftRightEdgesTextureUV.x = v.uv.x * (_LeftEdgeTexture_ST.x * _AspectRatio.x) + _LeftEdgeTexture_ST.z;
						o.leftRightEdgesTextureUV.y = (v.uv.y * _LeftEdgeTexture_ST.y + _LeftEdgeTexture_ST.w) + fmod2(_G2DWK_Frame_Time.x * _LeftEdgeTextureScrollingSpeed);
					#elif Is_Waterfall2D_LeftEdgeTextureStretchAutoY_Enabled
						o.leftRightEdgesTextureUV.x = (v.uv.x * leftRightEdgesThickness.y) * _LeftEdgeTexture_ST.x + _LeftEdgeTexture_ST.z;
						o.leftRightEdgesTextureUV.y = (v.uv.y * _LeftEdgeTexture_ST.y * _AspectRatio.w * leftRightEdgesThickness.y + _LeftEdgeTexture_ST.w) + fmod2(_G2DWK_Frame_Time.x * _LeftEdgeTextureScrollingSpeed);
					#else
						o.leftRightEdgesTextureUV.x = (v.uv.x * leftRightEdgesThickness.y) * _LeftEdgeTexture_ST.x + _LeftEdgeTexture_ST.z;
						o.leftRightEdgesTextureUV.y = (v.uv.y * _LeftEdgeTexture_ST.y + _LeftEdgeTexture_ST.w) + fmod2(_G2DWK_Frame_Time.x * _LeftEdgeTextureScrollingSpeed);
					#endif
				#else
					o.leftRightEdgesTextureUV.xy = TRANSFORM_TEX(vertexPositionWorldSpace, _LeftEdgeTexture);
					o.leftRightEdgesTextureUV.y += fmod2(_G2DWK_Frame_Time.x * _LeftEdgeTextureScrollingSpeed);
				#endif
			#endif

			//Right Texture UV
			#if Is_Waterfall2D_RightEdge_Enabled || Is_Waterfall2D_RightEdgeTextureSheet_Enabled || Is_Waterfall2D_RightEdgeTextureSheetWithLerp_Enabled
				#if Is_Waterfall2D_RightEdgeTextureStretch_Enabled || Is_Waterfall2D_RightEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_RightEdgeTextureStretchAutoY_Enabled
					#if Is_Waterfall2D_RightEdgeTextureStretchAutoX_Enabled
						o.leftRightEdgesTextureUV.z = ((v.uv.x - 1.0 + leftRightEdgesThickness.z)) * (_RightEdgeTexture_ST.x * _AspectRatio.x) + _RightEdgeTexture_ST.z;
						o.leftRightEdgesTextureUV.w = (v.uv.y * _RightEdgeTexture_ST.y + _RightEdgeTexture_ST.w) + fmod2(_G2DWK_Frame_Time.x * _RightEdgeTextureScrollingSpeed);
					#elif Is_Waterfall2D_RightEdgeTextureStretchAutoY_Enabled
						o.leftRightEdgesTextureUV.z = ((v.uv.x - 1.0 + leftRightEdgesThickness.z) * leftRightEdgesThickness.w) * _RightEdgeTexture_ST.x + _RightEdgeTexture_ST.z;
						o.leftRightEdgesTextureUV.w = (v.uv.y * _RightEdgeTexture_ST.y * _AspectRatio.w * leftRightEdgesThickness.w + _RightEdgeTexture_ST.w) + fmod2(_G2DWK_Frame_Time.x * _RightEdgeTextureScrollingSpeed);
					#else
						o.leftRightEdgesTextureUV.z = ((v.uv.x - 1.0 + leftRightEdgesThickness.z) * leftRightEdgesThickness.w) * _RightEdgeTexture_ST.x + _RightEdgeTexture_ST.z;
						o.leftRightEdgesTextureUV.w = (v.uv.y * _RightEdgeTexture_ST.y + _RightEdgeTexture_ST.w) + fmod2(_G2DWK_Frame_Time.x * _RightEdgeTextureScrollingSpeed);
					#endif
				#else
					o.leftRightEdgesTextureUV.zw = TRANSFORM_TEX(vertexPositionWorldSpace, _RightEdgeTexture);
					o.leftRightEdgesTextureUV.w += fmod2(_G2DWK_Frame_Time.x * _RightEdgeTextureScrollingSpeed);
				#endif
			#endif
		#endif

		#if Is_Waterfall2D_LeftRightEdgesNoise_Enabled
			#if Waterfall2D_HasLeftEdge
				o.leftRightEdgesNoiseTextureUV.xy = TRANSFORM_TEX((o.leftRightEdgesTextureUV.xy * _LeftRightEdgesNoiseTiling.xy), _NoiseTexture) + fmod2(_G2DWK_Frame_Time.w * _LeftRightEdgesNoiseSpeed);
				#if Is_Waterfall2D_LeftRightEdgesTextureStretch_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_LeftEdgeTextureStretch_Enabled || Is_Waterfall2D_LeftEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftEdgeTextureStretchAutoY_Enabled
					o.leftRightEdgesNoiseTextureUV.x *= v.uv.z;
				#endif
			#endif

			#if Waterfall2D_HasRightEdge
				o.leftRightEdgesNoiseTextureUV.zw = TRANSFORM_TEX((o.leftRightEdgesTextureUV.zw * _LeftRightEdgesNoiseTiling.xy), _NoiseTexture) + fmod2(_G2DWK_Frame_Time.w * _LeftRightEdgesNoiseSpeed);
				#if Is_Waterfall2D_LeftRightEdgesTextureStretch_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_RightEdgeTextureStretch_Enabled || Is_Waterfall2D_RightEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_RightEdgeTextureStretchAutoY_Enabled
					o.leftRightEdgesNoiseTextureUV.z *= v.uv.z;
				#endif
			#endif
		#endif
		
		#if Waterfall2D_HasLeftEdge
			o.leftRightEdgesTextureUV.x -= _LeftRightEdgesOffset.x * _LeftRightEdgesThickness.y;
			#if Is_Waterfall2D_LeftRightEdgesTextureStretch_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_LeftEdgeTextureStretch_Enabled || Is_Waterfall2D_LeftEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftEdgeTextureStretchAutoY_Enabled
				o.leftRightEdgesTextureUV.x *= v.uv.z;
			#endif
		#endif
		
		#if Waterfall2D_HasRightEdge
			o.leftRightEdgesTextureUV.z += _LeftRightEdgesOffset.z * _LeftRightEdgesThickness.w;
			#if Is_Waterfall2D_LeftRightEdgesTextureStretch_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_RightEdgeTextureStretch_Enabled || Is_Waterfall2D_RightEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_RightEdgeTextureStretchAutoY_Enabled
				o.leftRightEdgesTextureUV.z *= v.uv.z;
			#endif
		#endif

		// Top-Bottom Edges Texture UV

		#if Waterfall2D_HasTopEdge || Waterfall2D_HasBottomEdge
			half4 topBottomEdgesThickness = _TopBottomEdgesThickness;
			
			#if Waterfall2D_TopBottomEdgesUseAbsoluteThicknessAndOffset
				topBottomEdgesThickness.xz /= v.uv.w;
				topBottomEdgesThickness.yw = 1.0 / topBottomEdgesThickness.xz;
			#endif
		#endif

		#if Is_Waterfall2D_TopBottomEdgesSameTexture_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheet_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled
			#if Is_Waterfall2D_TopBottomEdgesTextureStretch_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoY_Enabled
				#if Is_Waterfall2D_TopBottomEdgesTextureStretchAutoX_Enabled
				float tbx = v.uv.x * _TopBottomEdgesTexture_ST.x * _AspectRatio.x;
				o.topBottomEdgesTextureUV.x = tbx * topBottomEdgesThickness.y + _TopBottomEdgesTexture_ST.z;
				o.topBottomEdgesTextureUV.y = (v.uv.y - (1.0 - topBottomEdgesThickness.x)) * (_TopBottomEdgesTexture_ST.y * topBottomEdgesThickness.y) + _TopBottomEdgesTexture_ST.w;
				o.topBottomEdgesTextureUV.z = tbx * topBottomEdgesThickness.w + _TopBottomEdgesTexture_ST.z;
				o.topBottomEdgesTextureUV.w = v.uv.y * (_TopBottomEdgesTexture_ST.y * topBottomEdgesThickness.w) + _TopBottomEdgesTexture_ST.w;
				#elif Is_Waterfall2D_TopBottomEdgesTextureStretchAutoY_Enabled
				float tby = _TopBottomEdgesTexture_ST.y * _AspectRatio.w;
				o.topBottomEdgesTextureUV.x = v.uv.x * _TopBottomEdgesTexture_ST.x + _TopBottomEdgesTexture_ST.z;
				o.topBottomEdgesTextureUV.y = (v.uv.y - (1.0 - topBottomEdgesThickness.x)) * tby + _TopBottomEdgesTexture_ST.w;
				o.topBottomEdgesTextureUV.z = o.topBottomEdgesTextureUV.x;
				o.topBottomEdgesTextureUV.w = v.uv.y * tby + _TopBottomEdgesTexture_ST.w;
				#else
				o.topBottomEdgesTextureUV.x = v.uv.x * _TopBottomEdgesTexture_ST.x + _TopBottomEdgesTexture_ST.z;
				o.topBottomEdgesTextureUV.y = (v.uv.y - (1.0 - topBottomEdgesThickness.x)) * (_TopBottomEdgesTexture_ST.y * topBottomEdgesThickness.y) + _TopBottomEdgesTexture_ST.w;
				o.topBottomEdgesTextureUV.z = o.topBottomEdgesTextureUV.x;
				o.topBottomEdgesTextureUV.w = v.uv.y * (_TopBottomEdgesTexture_ST.y * topBottomEdgesThickness.w) + _TopBottomEdgesTexture_ST.w;
				#endif
			#else
				o.topBottomEdgesTextureUV.xy = TRANSFORM_TEX(vertexPositionWorldSpace, _TopBottomEdgesTexture);
				o.topBottomEdgesTextureUV.zw = o.topBottomEdgesTextureUV.xy;
			#endif

			#if Is_Waterfall2D_TopBottomEdgesFlipTopEdgeY_Enabled
				o.topBottomEdgesTextureUV.y = 1.0 - o.topBottomEdgesTextureUV.y;
			#elif Is_Waterfall2D_TopBottomEdgesFlipBottomEdgeY_Enabled
				o.topBottomEdgesTextureUV.w = 1.0 - o.topBottomEdgesTextureUV.w;
			#endif
		#else
			//Top Texture UV
			#if Is_Waterfall2D_TopEdge_Enabled || Is_Waterfall2D_TopEdgeTextureSheet_Enabled || Is_Waterfall2D_TopEdgeTextureSheetWithLerp_Enabled
				#if Is_Waterfall2D_TopEdgeTextureStretch_Enabled || Is_Waterfall2D_TopEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_TopEdgeTextureStretchAutoY_Enabled
					#if Is_Waterfall2D_TopEdgeTextureStretchAutoX_Enabled
					o.topBottomEdgesTextureUV.x = v.uv.x * (_TopEdgeTexture_ST.x * _AspectRatio.x * topBottomEdgesThickness.y) + _TopEdgeTexture_ST.z;
					o.topBottomEdgesTextureUV.y = (v.uv.y - (1.0 - topBottomEdgesThickness.x)) * (_TopEdgeTexture_ST.y * topBottomEdgesThickness.y) + _TopEdgeTexture_ST.w;
					#elif Is_Waterfall2D_TopEdgeTextureStretchAutoY_Enabled
					o.topBottomEdgesTextureUV.x = v.uv.x * _TopEdgeTexture_ST.x + _TopEdgeTexture_ST.z;
					o.topBottomEdgesTextureUV.y = (v.uv.y - (1.0 - topBottomEdgesThickness.x)) * (_TopEdgeTexture_ST.y * _AspectRatio.w) + _TopEdgeTexture_ST.w;
					#else
					o.topBottomEdgesTextureUV.x = v.uv.x * _TopEdgeTexture_ST.x + _TopEdgeTexture_ST.z;
					o.topBottomEdgesTextureUV.y = (v.uv.y - (1.0 - topBottomEdgesThickness.x)) * (_TopEdgeTexture_ST.y * topBottomEdgesThickness.y) + _TopEdgeTexture_ST.w;
					#endif
				#else
					o.topBottomEdgesTextureUV.xy = TRANSFORM_TEX(vertexPositionWorldSpace, _TopEdgeTexture);
				#endif
			#endif

			//Bottom Texture UV
			#if Is_Waterfall2D_BottomEdge_Enabled || Is_Waterfall2D_BottomEdgeTextureSheet_Enabled || Is_Waterfall2D_BottomEdgeTextureSheetWithLerp_Enabled
				#if Is_Waterfall2D_BottomEdgeTextureStretch_Enabled || Is_Waterfall2D_BottomEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_BottomEdgeTextureStretchAutoY_Enabled
					#if Is_Waterfall2D_BottomEdgeTextureStretchAutoX_Enabled
						float bEdgeThicknessInv = 1.0 * topBottomEdgesThickness.w;
						o.topBottomEdgesTextureUV.z = v.uv.x * (_BottomEdgeTexture_ST.x * _AspectRatio.x * bEdgeThicknessInv);
						o.topBottomEdgesTextureUV.w = v.uv.y * (_BottomEdgeTexture_ST.y * bEdgeThicknessInv);
					#elif Is_Waterfall2D_BottomEdgeTextureStretchAutoY_Enabled
						o.topBottomEdgesTextureUV.z = v.uv.x * _BottomEdgeTexture_ST.x;
						o.topBottomEdgesTextureUV.w = v.uv.y * _BottomEdgeTexture_ST.y * _AspectRatio.w;
					#else
						o.topBottomEdgesTextureUV.z = v.uv.x * _BottomEdgeTexture_ST.x;
						o.topBottomEdgesTextureUV.w = v.uv.y * _BottomEdgeTexture_ST.y * topBottomEdgesThickness.w;
					#endif
					o.topBottomEdgesTextureUV.zw += _BottomEdgeTexture_ST.zw;
				#else
					o.topBottomEdgesTextureUV.zw = TRANSFORM_TEX(vertexPositionWorldSpace, _BottomEdgeTexture);
				#endif
			#endif
		#endif

		#if Is_Waterfall2D_TopBottomEdgesNoise_Enabled
			#if Waterfall2D_HasTopEdge
				o.topBottomEdgesNoiseTextureUV.xy = TRANSFORM_TEX((o.topBottomEdgesTextureUV.xy * _TopBottomEdgesNoiseTiling.xy), _NoiseTexture) + fmod2(_G2DWK_Frame_Time.w * _TopBottomEdgesNoiseSpeed);
				#if Is_Waterfall2D_TopBottomEdgesTextureStretch_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_TopEdgeTextureStretch_Enabled || Is_Waterfall2D_TopEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_TopEdgeTextureStretchAutoY_Enabled
					o.topBottomEdgesNoiseTextureUV.x *= v.uv.z;
				#endif
			#endif

			#if Waterfall2D_HasBottomEdge
				o.topBottomEdgesNoiseTextureUV.zw = TRANSFORM_TEX((o.topBottomEdgesTextureUV.zw * _TopBottomEdgesNoiseTiling.xy), _NoiseTexture) + fmod2(_G2DWK_Frame_Time.w * _TopBottomEdgesNoiseSpeed);
				#if Is_Waterfall2D_TopBottomEdgesTextureStretch_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_BottomEdgeTextureStretch_Enabled || Is_Waterfall2D_BottomEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_BottomEdgeTextureStretchAutoY_Enabled
					o.topBottomEdgesNoiseTextureUV.z *= v.uv.z;
				#endif
			#endif
		#endif
		
		#if Waterfall2D_HasTopEdge
			o.topBottomEdgesTextureUV.y += _TopBottomEdgesOffset.x * _TopBottomEdgesThickness.y;
			#if Is_Waterfall2D_TopBottomEdgesTextureStretch_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_TopEdgeTextureStretch_Enabled || Is_Waterfall2D_TopEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_TopEdgeTextureStretchAutoY_Enabled
				o.topBottomEdgesTextureUV.x *= v.uv.z;
			#endif
		#endif
		
		#if Waterfall2D_HasBottomEdge
			o.topBottomEdgesTextureUV.w -= _TopBottomEdgesOffset.z * _TopBottomEdgesThickness.w;
			#if Is_Waterfall2D_TopBottomEdgesTextureStretch_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_BottomEdgeTextureStretch_Enabled || Is_Waterfall2D_BottomEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_BottomEdgeTextureStretchAutoY_Enabled
				o.topBottomEdgesTextureUV.z *= v.uv.z;
			#endif
		#endif

		// Refraction UV

		#if Is_Waterfall2D_Refraction_Enabled
			float4 pos = mul(_WaterfallMVP, v.pos);
			o.refractionUV.xy = (pos.xy / pos.w) * 0.5 + 0.5;
			o.refractionUV.zw = TRANSFORM_TEX((vertexPositionWorldSpace * _RefractionNoiseTiling.xy), _NoiseTexture) + fmod2(_G2DWK_Frame_Time.w * _RefractionNoiseSpeed);
		#endif
		
		o.uv = v.uv;
		o.uv.x *= v.uv.z;

		return o;
	}

	inline half4 Waterfall2D_Frag (Varyings i)
	{
		float uvzInverse = 1.0 / i.uv.z;

		i.uv.x *= uvzInverse;

		half4 finalColor = 0.0;

		// Applying Refraction
		#if Is_Waterfall2D_Refraction_Enabled
			i.refractionUV.xy += (tex2D(_NoiseTexture, i.refractionUV.zw).r - 0.5) * _RefractionNoiseStrength;
			finalColor = tex2D(_RefractionTexture, i.refractionUV.xy);
		#endif

		// Applying Body color
		half4 bodyColor;
		#if Is_Waterfall2D_BodyColorGradient_Enabled
			bodyColor = lerp(_BodyColorGradientEnd, _BodyColorGradientStart, i.uv.y + _BodyColorGradientOffset);
		#else
			bodyColor = _BodyColor;
		#endif

		#if Is_Waterfall2D_ApplyTintColorBeforeTexture_Enabled
			finalColor = MixColors(finalColor, bodyColor);
		#endif

		// Applying Body Textures
		
		#if Waterfall2D_ApplyBodyAlphaCutoff || Waterfall2D_ApplyLeftRightEdgesAlphaCutoff
			half fragAlpha = 1.0;
		#endif

		// Applying Body First Texture
		#if Waterfall2D_HasBodyTexture
			#if Is_Waterfall2D_BodyTextureStretch_Enabled || Is_Waterfall2D_BodyTextureStretchAutoX_Enabled || Is_Waterfall2D_BodyTextureStretchAutoY_Enabled
				i.bodyTextureUV.x *= uvzInverse;
			#endif

			#if Is_Waterfall2D_BodyTextureNoise_Enabled
				#if Is_Waterfall2D_BodyTextureStretch_Enabled || Is_Waterfall2D_BodyTextureStretchAutoX_Enabled || Is_Waterfall2D_BodyTextureStretchAutoY_Enabled
					i.bodyNoiseTextureUV.x *= uvzInverse;
				#endif
				i.bodyTextureUV.xy += (tex2D(_NoiseTexture, i.bodyNoiseTextureUV.xy).a - 0.5) * _BodyNoiseStrength;
			#endif

			#if Is_Waterfall2D_BodyTextureSheet_Enabled || Is_Waterfall2D_BodyTextureSheetWithLerp_Enabled
			#if Is_Waterfall2D_BodyTextureSheetWithLerp_Enabled
			half4 bodyTextureColor = SampleTextureSheetLerp(_BodyTexture, i.bodyTextureUV.xy);
			#else
			half4 bodyTextureColor = SampleTextureSheet(_BodyTexture, i.bodyTextureUV.xy);
			#endif
			#else
			half4 bodyTextureColor = tex2D(_BodyTexture, i.bodyTextureUV.xy);
			#endif
			
			#if Waterfall2D_ApplyBodyAlphaCutoff
				fragAlpha = bodyTextureColor.a;
			#endif

			bodyTextureColor.a *= _BodyTextureOpacity;
			finalColor = MixColors(finalColor, bodyTextureColor);
		#endif

		// Applying Body Second Texture
		#if Waterfall2D_HasBodySecondTexture
			#if Is_Waterfall2D_BodySecondTextureStretch_Enabled || Is_Waterfall2D_BodySecondTextureStretchAutoX_Enabled || Is_Waterfall2D_BodySecondTextureStretchAutoY_Enabled
				i.bodyTextureUV.z *= uvzInverse;
			#endif

			#if Is_Waterfall2D_BodyTextureNoise_Enabled
				#if Is_Waterfall2D_BodySecondTextureStretch_Enabled || Is_Waterfall2D_BodySecondTextureStretchAutoX_Enabled || Is_Waterfall2D_BodySecondTextureStretchAutoY_Enabled
					i.bodyNoiseTextureUV.z *= uvzInverse;
				#endif
				i.bodyTextureUV.zw += (tex2D(_NoiseTexture, i.bodyNoiseTextureUV.zw).a - 0.5) * _BodyNoiseStrength;
			#endif

			#if Is_Waterfall2D_BodySecondTextureSheet_Enabled || Is_Waterfall2D_BodySecondTextureSheetWithLerp_Enabled
			#if Is_Waterfall2D_BodySecondTextureSheetWithLerp_Enabled
			half4 bodySecondTextureColor = SampleTextureSheetLerp(_BodySecondTexture, i.bodyTextureUV.zw);
			#else
			half4 bodySecondTextureColor = SampleTextureSheet(_BodySecondTexture, i.bodyTextureUV.zw);
			#endif
			#else
			half4 bodySecondTextureColor = tex2D(_BodySecondTexture, i.bodyTextureUV.zw);
			#endif
			
			#if Waterfall2D_ApplyBodyAlphaCutoff
				fragAlpha = min(fragAlpha, bodySecondTextureColor.a);
			#endif

			bodySecondTextureColor.a *= _BodySecondTextureOpacity;
			finalColor = MixColors(finalColor, bodySecondTextureColor);
		#endif
		
		// Applying Left Edge Texture
		#if Waterfall2D_HasLeftEdge
			#if Waterfall2D_LeftRightEdgesUseAbsoluteThicknessAndOffset
			if(i.uv.x > (_LeftRightEdgesOffset.x * _Size.z) && i.uv.x < ((_LeftRightEdgesThickness.x + _LeftRightEdgesOffset.x) * _Size.z))
			#else
			if(i.uv.x > _LeftRightEdgesOffset.x && i.uv.x < (_LeftRightEdgesThickness.x + _LeftRightEdgesOffset.x))
			#endif
			{
				#if Is_Waterfall2D_LeftRightEdgesTextureStretch_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_LeftEdgeTextureStretch_Enabled || Is_Waterfall2D_LeftEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftEdgeTextureStretchAutoY_Enabled
					i.leftRightEdgesTextureUV.x *= uvzInverse;
				#endif

				#if Is_Waterfall2D_LeftRightEdgesNoise_Enabled
					#if Is_Waterfall2D_LeftRightEdgesTextureStretch_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_LeftEdgeTextureStretch_Enabled || Is_Waterfall2D_LeftEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftEdgeTextureStretchAutoY_Enabled
						i.leftRightEdgesNoiseTextureUV.x *= uvzInverse;
					#endif
					i.leftRightEdgesTextureUV.xy += (tex2D(_NoiseTexture, i.leftRightEdgesNoiseTextureUV.xy).g - 0.5) * _LeftRightEdgesNoiseStrength;
				#endif

				#if Is_Waterfall2D_LeftRightEdgesSameTexture_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheet_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled
					
					#if Is_Waterfall2D_LeftRightEdgesSameTextureSheet_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled
						#if Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled
						half4 leftEdgeTextureColor = SampleTextureSheetLerp(_LeftRightEdgesTexture, i.leftRightEdgesTextureUV.xy);
						#else
						half4 leftEdgeTextureColor = SampleTextureSheet(_LeftRightEdgesTexture, i.leftRightEdgesTextureUV.xy);
						#endif
					#else 
						half4 leftEdgeTextureColor = tex2D(_LeftRightEdgesTexture, i.leftRightEdgesTextureUV.xy);
					#endif
					
					#if Waterfall2D_ApplyLeftRightEdgesAlphaCutoff
						fragAlpha = min(fragAlpha, leftEdgeTextureColor.a);
					#endif

					leftEdgeTextureColor.a *= _LeftRightEdgesTextureOpacity;
				#else

					#if Is_Waterfall2D_LeftEdgeTextureSheet_Enabled || Is_Waterfall2D_LeftEdgeTextureSheetWithLerp_Enabled
						#if Is_Waterfall2D_LeftEdgeTextureSheetWithLerp_Enabled
							half4 leftEdgeTextureColor = SampleTextureSheetLerp(_LeftEdgeTexture, i.leftRightEdgesTextureUV.xy);
						#else
							half4 leftEdgeTextureColor = SampleTextureSheet(_LeftEdgeTexture, i.leftRightEdgesTextureUV.xy);
						#endif
					#else
						half4 leftEdgeTextureColor = tex2D(_LeftEdgeTexture, i.leftRightEdgesTextureUV.xy);
					#endif
						
					#if Waterfall2D_ApplyLeftRightEdgesAlphaCutoff
						fragAlpha = min(fragAlpha, leftEdgeTextureColor.a);
					#endif

					leftEdgeTextureColor.a *= _LeftEdgeTextureOpacity;
				#endif

				finalColor = MixColors(finalColor, leftEdgeTextureColor);
			}
		#endif

		// Applying Right Edge Texture
		#if Waterfall2D_HasRightEdge
			#if Waterfall2D_LeftRightEdgesUseAbsoluteThicknessAndOffset
			if(i.uv.x > (1.0 - (_LeftRightEdgesThickness.z + _LeftRightEdgesOffset.z) * _Size.z) && i.uv.x < (1.0 - _LeftRightEdgesOffset.z * _Size.z))
			#else
			if(i.uv.x > (1.0 - (_LeftRightEdgesThickness.z + _LeftRightEdgesOffset.z)) && i.uv.x < (1.0 - _LeftRightEdgesOffset.z))
			#endif
			{
				#if Is_Waterfall2D_LeftRightEdgesTextureStretch_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_RightEdgeTextureStretch_Enabled || Is_Waterfall2D_RightEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_RightEdgeTextureStretchAutoY_Enabled
					i.leftRightEdgesTextureUV.z *= uvzInverse;
				#endif

				#if Is_Waterfall2D_LeftRightEdgesNoise_Enabled
					#if Is_Waterfall2D_LeftRightEdgesTextureStretch_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_LeftRightEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_RightEdgeTextureStretch_Enabled || Is_Waterfall2D_RightEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_RightEdgeTextureStretchAutoY_Enabled
						i.leftRightEdgesNoiseTextureUV.z *= uvzInverse;
					#endif
					i.leftRightEdgesTextureUV.zw += (tex2D(_NoiseTexture, i.leftRightEdgesNoiseTextureUV.zw).g - 0.5) * _LeftRightEdgesNoiseStrength;
				#endif

				#if Is_Waterfall2D_LeftRightEdgesSameTexture_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheet_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled
					
					#if Is_Waterfall2D_LeftRightEdgesSameTextureSheet_Enabled || Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled
						#if Is_Waterfall2D_LeftRightEdgesSameTextureSheetWithLerp_Enabled
							half4 rightEdgeTextureColor = SampleTextureSheetLerp(_LeftRightEdgesTexture, i.leftRightEdgesTextureUV.zw);
						#else
							half4 rightEdgeTextureColor = SampleTextureSheet(_LeftRightEdgesTexture, i.leftRightEdgesTextureUV.zw);
						#endif
					#else
						half4 rightEdgeTextureColor = tex2D(_LeftRightEdgesTexture, i.leftRightEdgesTextureUV.zw);
					#endif
						
					#if Waterfall2D_ApplyLeftRightEdgesAlphaCutoff
						fragAlpha = min(fragAlpha, rightEdgeTextureColor.a);
					#endif

					rightEdgeTextureColor.a *= _LeftRightEdgesTextureOpacity;
				#else
					
					#if Is_Waterfall2D_RightEdgeTextureSheet_Enabled || Is_Waterfall2D_RightEdgeTextureSheetWithLerp_Enabled
						#if Is_Waterfall2D_RightEdgeTextureSheetWithLerp_Enabled
							half4 rightEdgeTextureColor = SampleTextureSheetLerp(_RightEdgeTexture, i.leftRightEdgesTextureUV.zw);
						#else
							half4 rightEdgeTextureColor = SampleTextureSheet(_RightEdgeTexture, i.leftRightEdgesTextureUV.zw);
						#endif
					#else
						half4 rightEdgeTextureColor = tex2D(_RightEdgeTexture, i.leftRightEdgesTextureUV.zw);
					#endif
						
					#if Waterfall2D_ApplyLeftRightEdgesAlphaCutoff
						fragAlpha = min(fragAlpha, rightEdgeTextureColor.a);
					#endif

					rightEdgeTextureColor.a *= _RightEdgeTextureOpacity;	
				#endif

				finalColor = MixColors(finalColor, rightEdgeTextureColor);
			}
		#endif
		
		// Applying Top Edge Texture
		#if Waterfall2D_HasTopEdge
			#if Waterfall2D_TopBottomEdgesUseAbsoluteThicknessAndOffset
			if(i.uv.y > (1.0 - (_TopBottomEdgesThickness.x + _TopBottomEdgesOffset.x)  / i.uv.w) && i.uv.y < (1.0 - _TopBottomEdgesOffset.x / i.uv.w))
			#else
			if(i.uv.y > (1.0 - (_TopBottomEdgesThickness.x + _TopBottomEdgesOffset.x)) && i.uv.y < (1.0 - _TopBottomEdgesOffset.x))
			#endif
			{
				#if Is_Waterfall2D_TopBottomEdgesTextureStretch_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_TopEdgeTextureStretch_Enabled || Is_Waterfall2D_TopEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_TopEdgeTextureStretchAutoY_Enabled
					i.topBottomEdgesTextureUV.x *= uvzInverse;
				#endif

				#if Is_Waterfall2D_TopBottomEdgesNoise_Enabled
					#if Is_Waterfall2D_TopBottomEdgesTextureStretch_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_TopEdgeTextureStretch_Enabled || Is_Waterfall2D_TopEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_TopEdgeTextureStretchAutoY_Enabled
						i.topBottomEdgesNoiseTextureUV.x *= uvzInverse;
					#endif
					i.topBottomEdgesTextureUV.xy += (tex2D(_NoiseTexture, i.topBottomEdgesNoiseTextureUV.xy).b - 0.5) * _TopBottomEdgesNoiseStrength;
				#endif

				#if Is_Waterfall2D_TopBottomEdgesSameTexture_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheet_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled
					
					#if Is_Waterfall2D_TopBottomEdgesSameTextureSheet_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled
						#if Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled
						half4 topEdgeTextureColor = SampleTextureSheetLerp(_TopBottomEdgesTexture, i.topBottomEdgesTextureUV.xy);
						#else
						half4 topEdgeTextureColor = SampleTextureSheet(_TopBottomEdgesTexture, i.topBottomEdgesTextureUV.xy);
						#endif
					#else 
						half4 topEdgeTextureColor = tex2D(_TopBottomEdgesTexture, i.topBottomEdgesTextureUV.xy);
					#endif
						
					topEdgeTextureColor.a *= _TopBottomEdgesTextureOpacity;
				#else

					#if Is_Waterfall2D_TopEdgeTextureSheet_Enabled || Is_Waterfall2D_TopEdgeTextureSheetWithLerp_Enabled
						#if Is_Waterfall2D_TopEdgeTextureSheetWithLerp_Enabled
							half4 topEdgeTextureColor = SampleTextureSheetLerp(_TopEdgeTexture, i.topBottomEdgesTextureUV.xy);
						#else
							half4 topEdgeTextureColor = SampleTextureSheet(_TopEdgeTexture, i.topBottomEdgesTextureUV.xy);
						#endif
					#else
						half4 topEdgeTextureColor = tex2D(_TopEdgeTexture, i.topBottomEdgesTextureUV.xy);
					#endif
						
					topEdgeTextureColor.a *= _TopEdgeTextureOpacity;
				#endif
						
				finalColor = MixColors(finalColor, topEdgeTextureColor);
			}
		#endif

		// Applying Bottom Edge Texture
		#if Waterfall2D_HasBottomEdge
			#if Waterfall2D_TopBottomEdgesUseAbsoluteThicknessAndOffset
			if(i.uv.y > (_TopBottomEdgesOffset.z / i.uv.w) && i.uv.y < ((_TopBottomEdgesThickness.z + _TopBottomEdgesOffset.z) / i.uv.w))
			#else
			if(i.uv.y > _TopBottomEdgesOffset.z && i.uv.y < (_TopBottomEdgesThickness.z + _TopBottomEdgesOffset.z))
			#endif
			{
				#if Is_Waterfall2D_TopBottomEdgesTextureStretch_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_BottomEdgeTextureStretch_Enabled || Is_Waterfall2D_BottomEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_BottomEdgeTextureStretchAutoY_Enabled
					i.topBottomEdgesTextureUV.z *= uvzInverse;
				#endif

				#if Is_Waterfall2D_TopBottomEdgesNoise_Enabled
					#if Is_Waterfall2D_TopBottomEdgesTextureStretch_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoX_Enabled || Is_Waterfall2D_TopBottomEdgesTextureStretchAutoY_Enabled || Is_Waterfall2D_BottomEdgeTextureStretch_Enabled || Is_Waterfall2D_BottomEdgeTextureStretchAutoX_Enabled || Is_Waterfall2D_BottomEdgeTextureStretchAutoY_Enabled
						i.topBottomEdgesNoiseTextureUV.z *= uvzInverse;
					#endif
					i.topBottomEdgesTextureUV.zw += (tex2D(_NoiseTexture, i.topBottomEdgesNoiseTextureUV.zw).b - 0.5) * _TopBottomEdgesNoiseStrength;
				#endif

				#if Is_Waterfall2D_TopBottomEdgesSameTexture_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheet_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled
					
					#if Is_Waterfall2D_TopBottomEdgesSameTextureSheet_Enabled || Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled
						#if Is_Waterfall2D_TopBottomEdgesSameTextureSheetWithLerp_Enabled
							half4 bottomEdgeTextureColor = SampleTextureSheetLerp(_TopBottomEdgesTexture, i.topBottomEdgesTextureUV.zw);
						#else
							half4 bottomEdgeTextureColor = SampleTextureSheet(_TopBottomEdgesTexture, i.topBottomEdgesTextureUV.zw);
						#endif
					#else
						half4 bottomEdgeTextureColor = tex2D(_TopBottomEdgesTexture, i.topBottomEdgesTextureUV.zw);
					#endif
						
					bottomEdgeTextureColor.a *= _TopBottomEdgesTextureOpacity;
				#else
					
					#if Is_Waterfall2D_BottomEdgeTextureSheet_Enabled || Is_Waterfall2D_BottomEdgeTextureSheetWithLerp_Enabled
						#if Is_Waterfall2D_BottomEdgeTextureSheetWithLerp_Enabled
							half4 bottomEdgeTextureColor = SampleTextureSheetLerp(_BottomEdgeTexture, i.topBottomEdgesTextureUV.zw);
						#else
							half4 bottomEdgeTextureColor = SampleTextureSheet(_BottomEdgeTexture, i.topBottomEdgesTextureUV.zw);
						#endif
					#else
						half4 bottomEdgeTextureColor = tex2D(_BottomEdgeTexture, i.topBottomEdgesTextureUV.zw);
					#endif
						
					bottomEdgeTextureColor.a *= _BottomEdgeTextureOpacity;
				#endif

				finalColor = MixColors(finalColor, bottomEdgeTextureColor);
			}
		#endif

		#if !Is_Waterfall2D_ApplyTintColorBeforeTexture_Enabled
			finalColor = MixColors(finalColor, bodyColor);
		#endif
			
		#if !Is_Waterfall2D_Refraction_Enabled
			finalColor.rgb /= finalColor.a;
		#endif
			
		#if Waterfall2D_ApplyLeftRightEdgesAlphaCutoff
			finalColor.a *= (fragAlpha < _LeftRightEdgesTextureAlphaCutoff) ? 0.0 : 1.0;
		#endif
		
		#if Waterfall2D_ApplyBodyAlphaCutoff
			finalColor.a *= (fragAlpha < _BodyTextureAlphaCutoff) ? 0.0 : 1.0;
		#endif

		return finalColor;
	}

#endif // Game2D_WaterKit_Waterfall_INCLUDED
